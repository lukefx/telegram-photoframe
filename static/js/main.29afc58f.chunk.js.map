{"version":3,"sources":["Tdlib.js","assets/tg_logo.png","Authentication.js","RemoteFile.js","components/RoundChatPicture.js","ChatSelection.js","EmptyChat.js","Loading.js","ReactionButton.js","components/Photo.js","components/Video.js","utility.js","Slideshow.js","MainApp.js","App.js","reportWebVitals.js","index.js"],"names":["TelegramContext","createContext","TelegramProvider","props","useState","client","setClient","chatId","setChatId","chatIdRef","useRef","event","setEvent","history","setHistory","historyCalls","setHistoryCalls","sendTextMessage","text","a","send","chat_id","reply_to_message_id","input_message_content","entities","getChats","offset_order","offset_chat_id","limit","console","log","chat_list","getChat","downloadFile","fileId","file_id","priority","synchronous","getChatHistory","useCallback","from_message_id","calls","newHistory","Set","messages","sort","b","date","useEffect","length","from_id","id","onUpdate","update","message","current","message_ids","forEach","messageId","filter","handleMessages","tdlib","TdClient","useTestDC","readOnly","verbosity","jsVerbosity","fastUpdating","useDatabase","mode","parameters","use_test_dc","api_id","process","api_hash","system_language_code","navigator","language","device_model","application_version","use_secret_chats","use_message_database","use_file_database","files_directory","Provider","value","saveChatId","useTdlib","context","useContext","undefined","Error","Container","styled","div","display","placeItems","height","backgroundColor","Authentication","qr","type","window","location","reload","other_user_ids","qrCode","QRCodeStyling","width","data","authorization_state","link","image","tg_logo","dotsOptions","color","backgroundOptions","imageOptions","crossOrigin","margin","innerHTML","append","handleAuhentication","ref","RemoteFile","render","blob","setBlob","isSubscribed","file","URL","createObjectURL","getRemoteFile","RoundChatPicture","size","src","borderRadius","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","ListContainer","scrollDirection","List","ul","listStyle","padding","Chat","li","fontSize","background","ChatSelection","chats","setChats","chat_ids","map","chatInfo","title","chatPhotoId","photo","small","getChatList","chat","onClick","style","flexDirection","alignItems","marginLeft","Message","EmptyChat","setTitle","setFileId","big","getChatInfo","Overlay","position","top","right","zIndex","overflowX","boxShadow","Loading","ReactDOM","createPortal","document","getElementById","Button","button","border","font","ReactionButton","children","useSound","volume","playActive","playOn","onMouseDown","onMouseUp","sendReaction","PhotoContainer","Photo","Video","controls","autoPlay","getMediaMessages","includes","content","overflow","cursor","Caption","left","Reactions","Slideshow","loading","setLoading","media","setMedia","caption","setCaption","mediaMessages","isEmpty","last","photoSize","sizes","video","getMediaMessage","MainApp","App","updates","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB"],"mappings":"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","file":"static/js/main.29afc58f.chunk.js","sourcesContent":["import {\n  useState,\n  useRef,\n  useEffect,\n  useCallback,\n  useContext,\n  createContext\n} from 'react'\nimport TdClient from 'tdweb'\n\nconst TelegramContext = createContext()\n\nfunction TelegramProvider (props) {\n  const [client, setClient] = useState()\n  const [chatId, setChatId] = useState()\n  // we need to keep a pointer to chatId since is used in the tdlib callback\n  const chatIdRef = useRef()\n  const [event, setEvent] = useState()\n  const [history, setHistory] = useState([])\n\n  /**\n   * We need to count how many times we called getChatHistory\n   * On the first call it can returns just 1 message\n   * */\n\n  const [historyCalls, setHistoryCalls] = useState(0)\n\n  const sendTextMessage = async (chatId, text) => {\n    return client.send({\n      '@type': 'sendMessage',\n      chat_id: chatId,\n      reply_to_message_id: 0,\n      input_message_content: {\n        '@type': 'inputMessageText',\n        text: {\n          '@type': 'formattedText',\n          text,\n          entities: []\n        }\n      }\n    })\n  }\n\n  const getChats = async (\n    offset_order = '9223372036854775807',\n    offset_chat_id = 0,\n    limit = 20\n  ) => {\n    console.log('getChats')\n    return client.send({\n      '@type': 'getChats',\n      chat_list: { '@type': 'chatListMain' },\n      offset_order,\n      offset_chat_id,\n      limit\n    })\n  }\n\n  const getChat = async chatId => {\n    console.log('getChat', chatId)\n    return client.send({\n      '@type': 'getChat',\n      chat_id: chatId\n    })\n  }\n\n  const downloadFile = async fileId => {\n    console.log('Download file', fileId)\n    // downloading the file\n    await client.send({\n      '@type': 'downloadFile',\n      file_id: fileId,\n      priority: 1,\n      synchronous: true\n    })\n\n    // Read the data from local tdlib to blob\n    return client.send({\n      '@type': 'readFile',\n      file_id: fileId\n    })\n  }\n\n  const getChatHistory = useCallback(\n    async (chatId, from_message_id = 0, limit = 100) => {\n      console.log('getChatHistory', chatId, from_message_id)\n      if (client) {\n        setHistoryCalls(calls => calls + 1)\n        const newHistory = await client.send({\n          '@type': 'getChatHistory',\n          chat_id: chatId,\n          limit,\n          from_message_id\n        })\n\n        setHistory(history =>\n          [...new Set([...newHistory.messages, ...history])].sort(\n            (a, b) => a.date - b.date\n          )\n        )\n      }\n    },\n    [client]\n  )\n\n  useEffect(() => {\n    // We don't have to run this effect if chat is not selected\n    if (!chatId) {\n      return\n    }\n\n    if (history.length === 1 && historyCalls === 1) {\n      console.log('Refreshing history...')\n      const from_id = history[0].id\n      getChatHistory(chatId, from_id)\n    }\n  }, [chatId, history, getChatHistory, historyCalls])\n\n  const handleMessages = update => {\n    console.log(update)\n    // We can have a new message or one could be deleted\n    switch (update['@type']) {\n      case 'updateNewMessage':\n        if (update?.message?.chat_id === chatIdRef.current) {\n          setHistory(history => [...history, update?.message])\n        }\n        break\n      case 'updateDeleteMessages':\n        // delete the image from the cache\n        if (update.chat_id === chatIdRef.current) {\n          update.message_ids.forEach(async messageId => {\n            setHistory(history =>\n              history.filter(message => message.id !== messageId)\n            )\n          })\n        }\n        break\n      default:\n        break\n    }\n  }\n\n  const onUpdate = useCallback(update => {\n    // This is for debug, the amount of messages from the lib scares me...\n    // console.log('***', JSON.stringify(update))\n    // We care only of the auth states here\n    if (update['@type'] === 'updateAuthorizationState') {\n      setEvent(update)\n    }\n\n    if (\n      update['@type'] === 'updateNewMessage' ||\n      update['@type'] === 'updateDeleteMessages'\n    ) {\n      handleMessages(update)\n    }\n  }, [])\n\n  useEffect(() => {\n    console.log('Initializing tdlib')\n    const tdlib = new TdClient({\n      useTestDC: false,\n      readOnly: false,\n      verbosity: 3,\n      jsVerbosity: 3,\n      fastUpdating: true,\n      useDatabase: false,\n      mode: 'wasm'\n    })\n\n    tdlib.onUpdate = onUpdate\n    setClient(tdlib)\n  }, [onUpdate])\n\n  useEffect(() => {\n    if (client) {\n      console.log('setTdlibParameters')\n      client.send({\n        '@type': 'setTdlibParameters',\n        parameters: {\n          '@type': 'tdParameters',\n          use_test_dc: false,\n          api_id: process.env.REACT_APP_APP_ID,\n          api_hash: process.env.REACT_APP_HASH_ID,\n          system_language_code: navigator.language || 'en',\n          device_model: 'Telegram Frame',\n          application_version: '0.1',\n          use_secret_chats: false,\n          use_message_database: true,\n          use_file_database: true,\n          files_directory: '/'\n        }\n      })\n    }\n  }, [client])\n\n  const saveChatId = chatId => {\n    chatIdRef.current = chatId\n    setChatId(chatId)\n  }\n\n  console.log('Current history:', history)\n\n  return (\n    <TelegramContext.Provider\n      value={{\n        client,\n        chatId,\n        saveChatId,\n        event,\n        history,\n        getChat,\n        getChats,\n        getChatHistory,\n        sendTextMessage,\n        downloadFile\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction useTdlib () {\n  const context = useContext(TelegramContext)\n  if (context === undefined) {\n    throw new Error(`useTdlib must be used within a TelegramProvider`)\n  }\n  return context\n}\n\nexport { TelegramProvider, useTdlib }\n","export default __webpack_public_path__ + \"static/media/tg_logo.eea735da.png\";","import { useRef, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { useTdlib } from './Tdlib'\nimport QRCodeStyling from 'qr-code-styling'\nimport tg_logo from './assets/tg_logo.png'\n\nconst Container = styled.div({\n  display: 'grid',\n  placeItems: 'center',\n  height: 600,\n  backgroundColor: 'rgba(238, 243, 246, 0.8)'\n})\n\nexport default function Authentication ({ event }) {\n  const { client } = useTdlib()\n  const qr = useRef()\n\n  useEffect(() => {\n    async function handleAuhentication () {\n      const type = event['authorization_state']['@type']\n      switch (type) {\n        case 'authorizationStateClosed':\n          await client.send({ '@type': 'destroy' })\n          window.location.reload() // a kind of a 'hack' but it works...\n          break\n        case 'authorizationStateWaitEncryptionKey':\n          await client.send({\n            '@type': 'checkDatabaseEncryptionKey'\n          })\n          break\n        case 'authorizationStateWaitPhoneNumber':\n          await client.send({\n            '@type': 'requestQrCodeAuthentication',\n            other_user_ids: []\n          })\n          break\n        case 'authorizationStateWaitOtherDeviceConfirmation':\n          const qrCode = new QRCodeStyling({\n            width: 400,\n            height: 400,\n            data: event.authorization_state.link,\n            image: tg_logo,\n            dotsOptions: {\n              color: '#25abec',\n              type: 'square'\n            },\n            backgroundOptions: {\n              color: 'transparent'\n            },\n            imageOptions: {\n              crossOrigin: 'anonymous',\n              margin: 20\n            }\n          })\n\n          qr.current.innerHTML = ''\n          qrCode.append(qr.current)\n\n          break\n        default:\n          break\n      }\n    }\n\n    if (client && event?.authorization_state) {\n      handleAuhentication()\n    }\n  }, [client, event])\n\n  return (\n    <Container>\n      <h1>Login with your device</h1>\n      <div ref={qr}></div>\n    </Container>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { useTdlib } from './Tdlib'\n\nexport default function RemoteFile ({ fileId, render }) {\n  const { downloadFile } = useTdlib()\n  const [blob, setBlob] = useState()\n\n  useEffect(() => {\n    let isSubscribed = true\n    async function getRemoteFile () {\n      if (!fileId) return\n      const file = await downloadFile(fileId)\n      if (isSubscribed) {\n        setBlob(URL.createObjectURL(file.data))\n      }\n    }\n\n    getRemoteFile()\n    return () => (isSubscribed = false)\n  }, [fileId, downloadFile])\n\n  return render && render({ blob })\n}\n","import styled from 'styled-components/macro'\n\nconst RoundChatPicture = styled.div(({ size = 100, src }) => ({\n  height: size,\n  width: size,\n  borderRadius: '50%',\n  backgroundImage: `url(${src})`,\n  backgroundPosition: 'center',\n  backgroundRepeat: 'no-repeat',\n  backgroundSize: 'cover',\n  backgroundColor: 'rgba(238, 243, 246, 0.8)'\n}))\n\nexport { RoundChatPicture }\n","import { useState, useEffect } from 'react'\nimport styled from 'styled-components/macro'\nimport { useTdlib } from './Tdlib'\nimport RemoteFile from './RemoteFile'\nimport { RoundChatPicture } from './components/RoundChatPicture'\n\nconst ListContainer = styled.div({\n  scrollDirection: 'vertical'\n})\n\nconst List = styled.ul({\n  listStyle: 'none',\n  margin: 0,\n  padding: 0\n})\n\nconst Chat = styled.li({\n  padding: 10,\n  fontSize: '2rem',\n  '&:nth-child(odd)': {\n    background: 'rgba(238, 243, 246, 0.8)'\n  }\n})\n\nexport default function ChatSelection () {\n  const { client, getChat, getChats, saveChatId } = useTdlib()\n  const [chats, setChats] = useState([])\n\n  useEffect(() => {\n    async function getChatList () {\n      const response = await getChats()\n      response.chat_ids.map(async chatId => {\n        const chatInfo = await getChat(chatId)\n        setChats(chats => [\n          ...chats,\n          {\n            id: chatId,\n            title: chatInfo.title,\n            chatPhotoId: chatInfo?.photo?.small?.id\n          }\n        ])\n      })\n    }\n\n    getChatList()\n  }, [client, getChat, getChats])\n\n  return (\n    <ListContainer>\n      <h1>Select a chat to use as Frame:</h1>\n      <List>\n        {chats.map(chat => (\n          <Chat key={chat.id} onClick={event => saveChatId(chat.id)}>\n            <div\n              style={{\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'center'\n              }}\n            >\n              <RemoteFile\n                fileId={chat.chatPhotoId}\n                render={props => (\n                  <RoundChatPicture size={100} src={props.blob} />\n                )}\n              />\n              <div style={{ marginLeft: 30 }}>{chat.title}</div>\n            </div>\n          </Chat>\n        ))}\n      </List>\n    </ListContainer>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport styled from 'styled-components/macro'\nimport { useTdlib } from './Tdlib'\nimport RemoteFile from './RemoteFile'\nimport { RoundChatPicture } from './components/RoundChatPicture'\n\nconst Container = styled.div({\n  display: 'grid',\n  placeItems: 'center',\n  height: '100vh'\n})\n\nconst Message = styled.div({\n  fontSize: '2rem'\n})\n\nexport default function EmptyChat () {\n  console.log('Rendering emptyChat')\n  const { client, chatId, getChat, getChatHistory } = useTdlib()\n  const [title, setTitle] = useState(null)\n  const [fileId, setFileId] = useState()\n\n  useEffect(() => {\n    if (chatId && getChatHistory) {\n      getChatHistory(chatId)\n    }\n  }, [chatId, getChatHistory])\n\n  useEffect(() => {\n    let isSubscribed = true\n\n    async function getChatInfo () {\n      const chat = await getChat(chatId)\n      const fileId = chat?.photo?.big?.id\n\n      if (isSubscribed) {\n        setTitle(chat.title)\n        setFileId(fileId)\n      }\n    }\n\n    getChatInfo()\n    return () => (isSubscribed = false)\n  }, [client, chatId, getChat])\n\n  return (\n    <Container>\n      <RemoteFile\n        fileId={fileId}\n        render={props => <RoundChatPicture size={400} src={props.blob} />}\n      />\n      <Message>Send a picture to '{title}' to view it here</Message>\n    </Container>\n  )\n}\n","import ReactDOM from 'react-dom'\nimport styled from 'styled-components/macro'\n\nconst Overlay = styled.div({\n  display: 'grid',\n  placeItems: 'center',\n  height: '100%',\n  width: '100%',\n  position: 'fixed',\n  top: 0,\n  right: 0,\n  zIndex: 999,\n  backgroundColor: 'rgba(238, 243, 246, 0.8)',\n  overflowX: 'hidden'\n})\n\nconst Container = styled.div({\n  padding: 20,\n  display: 'grid',\n  placeItems: 'center',\n  backgroundColor: 'white',\n  boxShadow: '0 0 16px 0 rgba(51,51,51,0.16)',\n  height: 150,\n  width: 150,\n  borderRadius: '50%'\n})\n\nexport default function Loading ({ message = 'Loading...' }) {\n  return ReactDOM.createPortal(\n    <Overlay>\n      <Container>\n        <div>{message}</div>\n      </Container>\n    </Overlay>,\n    document.getElementById('modal-root')\n  )\n}\n","import styled from 'styled-components'\nimport useSound from 'use-sound'\nimport { useTdlib } from './Tdlib'\n\nconst Button = styled.button({\n  padding: 10,\n  border: 'none',\n  font: 'inherit',\n  color: 'inherit',\n  backgroundColor: 'light-grey',\n  borderRadius: '50%',\n  height: 50,\n  width: 50,\n  fontSize: '1.5rem',\n  margin: 5\n})\n\nexport default function ReactionButton ({ client, text, children }) {\n  const { chatId, sendTextMessage } = useTdlib()\n  const [playActive] = useSound('/pop-down.mp3', { volume: 0.25 })\n  const [playOn] = useSound('/pop-up-on.mp3', { volume: 0.25 })\n\n  function sendReaction (text) {\n    sendTextMessage(chatId, text)\n  }\n\n  function onClick (event) {\n    playOn()\n    sendReaction(text)\n  }\n\n  return (\n    <Button onMouseDown={playActive} onMouseUp={onClick}>\n      {children}\n    </Button>\n  )\n}\n","import styled from 'styled-components/macro'\nimport RemoteFile from '../RemoteFile'\n\nconst PhotoContainer = styled.div(({ blob }) => ({\n  // width: '100%',\n  height: 600,\n  backgroundImage: `url(${blob})`,\n  backgroundPosition: 'center',\n  backgroundRepeat: 'no-repeat',\n  backgroundSize: 'cover'\n}))\n\nexport default function Photo ({ fileId }) {\n  return (\n    <RemoteFile\n      fileId={fileId}\n      render={props => <PhotoContainer blob={props.blob} />}\n    />\n  )\n}\n","import RemoteFile from '../RemoteFile'\n\nexport default function Video ({ fileId }) {\n  return (\n    <RemoteFile\n      fileId={fileId}\n      render={props => <video src={props.blob} controls autoPlay />}\n    />\n  )\n}\n","/**\n * Returns a list of media messages from the current history\n * @param {Array} history Message's history\n */\nexport function getMediaMessages (history) {\n  return history.filter(message =>\n    ['messagePhoto', 'messageVideo'].includes(message?.content?.['@type'])\n  )\n}\n","import { useState, useEffect } from 'react'\nimport styled from 'styled-components/macro'\nimport { last, isEmpty } from 'lodash'\nimport { useTdlib } from './Tdlib'\nimport Loading from './Loading'\nimport ReactionButton from './ReactionButton'\nimport Photo from './components/Photo'\nimport Video from './components/Video'\nimport { getMediaMessages } from './utility'\n\nconst Container = styled.div({\n  overflow: 'hidden',\n  height: 600,\n  width: 1024,\n  cursor: 'none'\n})\n\nconst Caption = styled.div({\n  position: 'relative',\n  top: -60,\n  left: '2%',\n  color: 'white',\n  fontSize: '2rem'\n})\n\nconst Reactions = styled.div({\n  position: 'relative',\n  top: '-15%',\n  left: '85%',\n  display: 'flex',\n  flexDirection: 'row'\n})\n\nexport default function Slideshow () {\n  console.log('Rendering Slideshow')\n  const { client, chatId, history } = useTdlib()\n  const [loading, setLoading] = useState(true)\n  const [media, setMedia] = useState()\n  const [caption, setCaption] = useState('')\n\n  useEffect(() => {\n    async function getMediaMessage () {\n      setLoading(true)\n      // Getting last message with a Photo/Video\n      const mediaMessages = getMediaMessages(history)\n\n      if (isEmpty(mediaMessages)) {\n        // we don't have any media in the chat...\n        setMedia(<Loading message='No media in this chat...' />)\n      }\n\n      const message = last(mediaMessages)\n      switch (message?.content?.['@type']) {\n        case 'messagePhoto':\n          const photo = message.content.photo\n          const photoSize = last(photo.sizes)\n          setMedia(<Photo fileId={photoSize.photo.id} />)\n          setCaption(message.content?.text)\n          break\n        case 'messageVideo':\n          const video = message.content.video\n          setMedia(<Video fileId={video.video.id} />)\n          setCaption(message.content?.text)\n          break\n        default:\n          break\n      }\n      setLoading(false)\n    }\n\n    getMediaMessage()\n  }, [client, history, chatId])\n\n  return (\n    <Container>\n      {loading && <Loading />}\n      {media}\n      <Caption>{caption}</Caption>\n      <Reactions>\n        <ReactionButton client={client} text='‚ô•Ô∏è'>\n          ‚ô•Ô∏è\n        </ReactionButton>\n        <ReactionButton client={client} text='ü•∞'>\n          ü•∞\n        </ReactionButton>\n      </Reactions>\n    </Container>\n  )\n}\n","import { isEmpty } from 'lodash'\nimport { useTdlib } from './Tdlib'\nimport ChatSelection from './ChatSelection'\nimport EmptyChat from './EmptyChat'\nimport Slideshow from './Slideshow'\nimport { getMediaMessages } from './utility'\n\nexport default function MainApp () {\n  const { chatId, history } = useTdlib()\n\n  // We haven't selected a chat yet...\n  if (!chatId) {\n    return <ChatSelection />\n  }\n\n  // There are no messages to show\n  if (isEmpty(getMediaMessages(history))) {\n    return <EmptyChat />\n  }\n\n  return <Slideshow />\n}\n","import React from 'react'\nimport { useTdlib } from './Tdlib'\nimport Authentication from './Authentication'\nimport MainApp from './MainApp'\n\nimport '@fontsource/roboto'\nimport './App.css'\nimport Loading from './Loading'\n\nfunction App () {\n  const { client, event, updates } = useTdlib()\n\n  if (event && event['authorization_state']) {\n    const type = event['authorization_state']['@type']\n    switch (type) {\n      case 'authorizationStateWaitEncryptionKey':\n      case 'authorizationStateWaitOtherDeviceConfirmation':\n      case 'authorizationStateWaitPhoneNumber':\n      case 'updateAuthorizationState':\n      case 'authorizationStateClosed':\n        return <Authentication event={event} client={client} />\n      case 'authorizationStateReady':\n        return <MainApp updates={updates} client={client} />\n      default:\n        return null\n    }\n  } else {\n    return <Loading message='Loading the app...' />\n  }\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { StrictMode } from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport { TelegramProvider } from './Tdlib'\n\nReactDOM.render(\n  <StrictMode>\n    <TelegramProvider>\n      <App />\n    </TelegramProvider>\n  </StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}